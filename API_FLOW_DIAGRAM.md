# API Flow Diagram - Visual Guide

## 🎬 Complete User Journey

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         USER OPENS DASHBOARD                            │
│                    http://localhost:8001                                │
└────────────────────────────┬────────────────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                    DASHBOARD LOADS                                      │
│  • Connects to WebSocket: ws://localhost:8001/ws/stream                │
│  • Loads portfolio, watchlist, scanner                                 │
│  • Displays system status                                              │
└────────────────────────────┬────────────────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                    USER ENTERS TICKER                                   │
│  • Ticker: NVDA                                                        │
│  • Exchange: NASDAQ                                                    │
│  • Clicks: "Run Full Prediction"                                       │
└────────────────────────────┬────────────────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────────────────┐
│              BACKEND: POST /api/predict                                 │
│  • Receives: {"ticker": "NVDA", "exchange": "NASDAQ"}                 │
│  • Starts: 6-step orchestrated pipeline                               │
└────────────────────────────┬────────────────────────────────────────────┘
                             │
        ┌────────────────────┼────────────────────┐
        │                    │                    │
        ▼                    ▼                    ▼
   ┌─────────┐          ┌──────────┐        ┌──────────────┐
   │ FINNHUB │          │ DUCKDUCKGO│       │ YFINANCE     │
   │  API    │          │  SEARCH   │       │ (FALLBACK)   │
   └────┬────┘          └──────┬────┘       └──────┬───────┘
        │                      │                   │
        ▼                      ▼                   ▼
   ┌─────────────────────────────────────────────────────┐
   │         STEP 1: FETCH DATA                          │
   │  ┌──────────────────────────────────────────────┐   │
   │  │ Finnhub Quote API                            │   │
   │  │ GET /quote?symbol=NVDA&token=API_KEY        │   │
   │  │ Response: {c: 187.90, d: -0.08, dp: -0.04}  │   │
   │  └──────────────────────────────────────────────┘   │
   │                                                     │
   │  ┌──────────────────────────────────────────────┐   │
   │  │ Finnhub News API                             │   │
   │  │ GET /company-news?symbol=NVDA&from=...      │   │
   │  │ Response: [{headline: "...", url: "..."}]   │   │
   │  └──────────────────────────────────────────────┘   │
   │                                                     │
   │  ┌──────────────────────────────────────────────┐   │
   │  │ DuckDuckGo Search                            │   │
   │  │ Query: "NVDA stock NASDAQ market news..."   │   │
   │  │ Response: [{title: "...", href: "..."}]     │   │
   │  └──────────────────────────────────────────────┘   │
   └────────────────────┬────────────────────────────────┘
                        │
                        ▼
   ┌─────────────────────────────────────────────────────┐
   │         STEP 2: EXTRACT CONTENT                     │
   │  ┌──────────────────────────────────────────────┐   │
   │  │ For each DuckDuckGo result:                  │   │
   │  │ 1. Fetch URL with trafilatura               │   │
   │  │ 2. Extract clean text                       │   │
   │  │ 3. Limit to 2500 characters                 │   │
   │  │ 4. Compile research context                 │   │
   │  └──────────────────────────────────────────────┘   │
   └────────────────────┬────────────────────────────────┘
                        │
                        ▼
   ┌─────────────────────────────────────────────────────┐
   │         STEP 3: CALCULATE INDICATORS                │
   │  ┌──────────────────────────────────────────────┐   │
   │  │ Technical Indicators:                        │   │
   │  │ • SMA (20, 50, 200)                          │   │
   │  │ • RSI (14)                                   │   │
   │  │ • MACD (12, 26, 9)                           │   │
   │  │ • Bollinger Bands (20, 2)                    │   │
   │  │ • ATR (14)                                   │   │
   │  │ • Stochastic (14, 3)                         │   │
   │  └──────────────────────────────────────────────┘   │
   └────────────────────┬────────────────